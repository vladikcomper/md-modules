
; ===============================================================
; ---------------------------------------------------------------
; Subroutine to generate 1bpp decode table
; ---------------------------------------------------------------
; INPUT:
;		a1		Address for the generated table
;		d4	.w	Pixel index for bit #0
;		d5	.w	Pixel indec for bit #1
;
; USES:
;		d0-d7
; ---------------------------------------------------------------

Generate1bppDecodeTable:
	lsl.w	#5, d5
	lea		@BaseDecodeTable(pc, d5.w), a2
	lsl.w	#5, d4
	beq.s	@DirectTransfer
	lea		@BaseDecodeTable(pc, d4.w), a3

	movem.l	(a2)+, d0-d3
	movem.l	$10(a3), d4-d7
	swap	d7
	or.l	d7, d0
	swap	d6
	or.l	d6, d1
	swap	d5
	or.l	d5, d2
	swap	d4
	or.l	d4, d3
	movem.l	d0-d3, (a0)

	movem.l	(a2)+, d0-d3
	movem.l	(a3), d4-d7
	swap	d7
	or.l	d7, d0
	swap	d6
	or.l	d6, d1
	swap	d5
	or.l	d5, d2
	swap	d4
	or.l	d4, d3
	movem.l	d0-d3, $10(a0)
	rts

; ---------------------------------------------------------------
@DirectTransfer:
	movem.l	(a2), d0-d7
	movem.l	d0-d7, (a0)
	rts

; ---------------------------------------------------------------
@BaseDecodeTable:
	dc.w	$0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000, $0000
	dc.w	$0000, $0001, $0010, $0011, $0100, $0101, $0110, $0111, $1000, $1001, $1010, $1011, $1100, $1101, $1110, $1111
	dc.w	$0000, $0002, $0020, $0022, $0200, $0202, $0220, $0222, $2000, $2002, $2020, $2022, $2200, $2202, $2220, $2222
	dc.w	$0000, $0003, $0030, $0033, $0300, $0303, $0330, $0333, $3000, $3003, $3030, $3033, $3300, $3303, $3330, $3333
	dc.w	$0000, $0004, $0040, $0044, $0400, $0404, $0440, $0444, $4000, $4004, $4040, $4044, $4400, $4404, $4440, $4444
	dc.w	$0000, $0005, $0050, $0055, $0500, $0505, $0550, $0555, $5000, $5005, $5050, $5055, $5500, $5505, $5550, $5555
	dc.w	$0000, $0006, $0060, $0066, $0600, $0606, $0660, $0666, $6000, $6006, $6060, $6066, $6600, $6606, $6660, $6666
	dc.w	$0000, $0007, $0070, $0077, $0700, $0707, $0770, $0777, $7000, $7007, $7070, $7077, $7700, $7707, $7770, $7777
	dc.w	$0000, $0008, $0080, $0088, $0800, $0808, $0880, $0888, $8000, $8008, $8080, $8088, $8800, $8808, $8880, $8888
	dc.w	$0000, $0009, $0090, $0099, $0900, $0909, $0990, $0999, $9000, $9009, $9090, $9099, $9900, $9909, $9990, $9999
	dc.w	$0000, $000A, $00A0, $00AA, $0A00, $0A0A, $0AA0, $0AAA, $A000, $A00A, $A0A0, $A0AA, $AA00, $AA0A, $AAA0, $AAAA
	dc.w	$0000, $000B, $00B0, $00BB, $0B00, $0B0B, $0BB0, $0BBB, $B000, $B00B, $B0B0, $B0BB, $BB00, $BB0B, $BBB0, $BBBB
	dc.w	$0000, $000C, $00C0, $00CC, $0C00, $0C0C, $0CC0, $0CCC, $C000, $C00C, $C0C0, $C0CC, $CC00, $CC0C, $CCC0, $CCCC
	dc.w	$0000, $000D, $00D0, $00DD, $0D00, $0D0D, $0DD0, $0DDD, $D000, $D00D, $D0D0, $D0DD, $DD00, $DD0D, $DDD0, $DDDD
	dc.w	$0000, $000E, $00E0, $00EE, $0E00, $0E0E, $0EE0, $0EEE, $E000, $E00E, $E0E0, $E0EE, $EE00, $EE0E, $EEE0, $EEEE
	dc.w	$0000, $000F, $00F0, $00FF, $0F00, $0F0F, $0FF0, $0FFF, $F000, $F00F, $F0F0, $F0FF, $FF00, $FF0F, $FFF0, $FFFF
